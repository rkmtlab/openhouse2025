<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rekimoto Lab. × Ishiguro Lab. Open House 2025</title>
  <meta name="description" content="暦本研究室・石黒研究室 Open House 2025 – 概要 / スケジュール / 会場 / 展示内容 / メンバー / About" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #f7f7f8;         /* page background */
      --ink: #111827;        /* text */
      --ink-2: #374151;      /* secondary text */
      --muted: #6b7280;      /* muted */
      --line: #e5e7eb;       /* borders */
      --brand: #1f2937;      /* primary accent (deep gray) */
      --brand-2: #4b5563;    /* secondary accent */
      --card: #ffffff;       /* surfaces */
      --ring: rgba(17,24,39,.18);
      --maxw: 1200px;
      --radius: 18px;
      --shadow: 0 12px 32px rgba(17,24,39,.08);
      --shadow-sm: 0 6px 18px rgba(17,24,39,.06);
      --gap: clamp(16px, 2vw, 24px);
    }
    html { scroll-behavior: smooth; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Yu Gothic UI", "Yu Gothic", Meiryo, sans-serif;
      color: var(--ink); background: var(--bg); line-height: 1.7; text-rendering: optimizeLegibility;
    }

    /* Utilities */
    .container { width: min(100% - 32px, var(--maxw)); margin-inline: auto; }
    .cluster { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
    .stack { display: grid; gap: 12px; }
    .grid { display: grid; gap: var(--gap); }
    .two-col { display: grid; grid-template-columns: 1fr; gap: var(--gap); }
    .grid.auto-fit { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .card { background: var(--card); border: 1px solid var(--line); border-radius: var(--radius); box-shadow: var(--shadow-sm); padding: clamp(16px, 2.2vw, 24px); }

    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: .55em;
      padding: .8rem 1.1rem; border-radius: 999px; font-weight: 800; letter-spacing: .02em; text-decoration: none;
      border: 1.5px solid var(--brand); color: #fff; background: var(--brand);
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
      box-shadow: var(--shadow-sm);
    }
    .btn.ghost { background: #fff; color: var(--brand); }
    .btn:hover, .btn:focus-visible { transform: translateY(-1px); box-shadow: var(--shadow); outline: none; }

    .tag { display: inline-block; background: #fff; border: 1px solid var(--line); color: var(--muted); padding: .25rem .6rem; border-radius: 999px; font-size: .85rem; }

    .skip { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip:focus { left: 16px; top: 16px; width: auto; height: auto; z-index: 1000; background: #fff; padding: .5rem .75rem; border-radius: 8px; outline: 3px solid var(--ring); }

    /* Header */
    /* header { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(1.2) blur(10px); background: color-mix(in srgb, var(--bg) 75%, #fff 25%); border-bottom: 1px solid rgba(31,41,55,.08); } */
    header { position: fixed; top: 0; left: 0; right: 0; z-index: 50; backdrop-filter: saturate(1.2) blur(10px); background: color-mix(in srgb, var(--bg) 75%, #fff 25%); border-bottom: 1px solid rgba(31,41,55,.08); }
    .nav { display: flex; align-items: center; justify-content: space-between; padding: .6rem 0; position: relative; }
    .brand { display: grid; gap: 2px; }
    .brand b { font-weight: 900; letter-spacing: .02em; }
    .brand small { color: var(--muted); font-size: .85rem; }
    nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 4px; flex-wrap: wrap; }
    nav a { display: inline-flex; align-items: center; padding: .55rem .8rem; border-radius: 12px; color: var(--ink-2); text-decoration: none; font-weight: 700; border: 1px solid transparent; transition: background .18s ease, border-color .18s ease; }
    nav a:not(.btn):hover, nav a[aria-current="page"]:not(.btn) { background: #fff; border: 1px solid var(--line); }
    /* About(メッセージ) link: keep default look when not hovered/active */
    #aboutLink { background: transparent; border-color: transparent; }
    #aboutLink:hover, #aboutLink[aria-current="page"] { background: #fff; border-color: var(--line); }

    main {
      /* モバイル向けに多めのパディング */
      padding-top: 200px;
    }

    /* デバイスサイズに応じてパディングを調整 */
    @media (min-width: 768px) {
      main {
        padding-top: 85px; /* タブレットサイズ */
      }
    }

    @media (min-width: 1024px) {
      main {
        padding-top: 70px; /* デスクトップサイズ */
      }
    }
    /* About(メッセージ)リンクをボタンスタイルに変更 - 参加登録と同じデザイン */
    #aboutLink {
      background: var(--bg);
      color: var(--ink);
      border-color: var(--muted);
      border-radius: 12px;
      padding: .55rem .8rem;
      font-weight: 700;
      box-shadow: none;
      font-size: 1rem; /* 通常のフォントサイズに戻す */
    }

    #aboutLink:hover, 
    #aboutLink[aria-current="page"] {
      background: var(--brand-2);
      color: #fff;
      border-color: var(--brand-2);
    }

    /* Header nav button align with links */
    nav .btn {
      padding: .55rem .8rem;          /* navリンクと同じ */
      border-radius: 12px;            /* navリンクと同じ */
      border-width: 1px;              /* 枠線太さを合わせる */
      box-shadow: none;               /* 影を外す */
      font-weight: 700;               /* navリンクと同じ太さ */
    }
    nav .btn:hover,
    nav .btn:focus-visible {
      transform: none;                /* 浮き上がりを無効化 */
      box-shadow: none;
      background: #fff;
      border-color: var(--line);
      outline: none;
    }

    /* Hero */
    .hero-inner { display: grid; align-items: center; gap: var(--gap); grid-template-columns: 1.1fr; padding: clamp(20px, 5vw, 56px) 0; }
    .eyebrow { display: inline-flex; align-items: center; gap: .6em; font-weight: 800; color: var(--brand-2); }
    .title { font-size: clamp(28px, 5vw, 56px); line-height: 1.12; margin: .1em 0 .2em; font-weight: 900; letter-spacing: .01em; }
    .lead { font-size: clamp(16px, 2.2vw, 20px); color: var(--ink-2); }

    section { padding: clamp(20px, 4vw, 48px) 0; }
    section h2 { font-size: clamp(22px, 3.2vw, 36px); margin: 0 0 .6em; letter-spacing: .01em; }
    section h3 { font-size: clamp(18px, 2.4vw, 22px); margin: .2em 0 .4em; }
    .list { margin: 0; padding-left: 1.1em; }

    footer { border-top: 1px solid rgba(31,41,55,.08); padding: 40px 0; color: var(--ink-2); }

    .prose { max-width: 70ch; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background: #111827; color: #fff; padding: .1rem .35rem; border-radius: 6px; font-size: .85em; }

    /* Dialog (記事=展示詳細) */
    dialog { border: 1px solid var(--line); border-radius: 16px; padding: 0; max-width: min(900px, 96vw); box-shadow: var(--shadow); }
    dialog::backdrop { background: rgba(0,0,0,.4); }
    .dialog-head { padding: 18px 22px; border-bottom: 1px solid var(--line); display: flex; align-items: center; justify-content: space-between; }
    .dialog-body { padding: 20px 22px; }
    .close { background: transparent; border: 0; font-size: 20px; padding: 6px 10px; border-radius: 10px; }
    .close:focus-visible { outline: 3px solid var(--ring); }

    /* 他のナビのみ白背景に（.btnとaboutLinkを除外） */
    nav a:not(.btn):not(#aboutLink):hover,
    nav a[aria-current="page"]:not(.btn):not(#aboutLink) {
      background: #fff;
      border: 1px solid var(--line);
    }

    /* 参加登録ボタン: 通常時は等サイズ、ホバー時のみ少し大きく。色は常にブランド色 */
    nav .btn,
    nav .btn:hover,
    nav .btn:focus-visible,
    nav .btn[aria-current="page"] {
      background: var(--brand);
      color: #fff;
      border-color: var(--brand);
      box-shadow: none;
      transform: none;
      outline: none;
    }

    /* 参加登録ボタンと同じスタイルをメッセージにも適用（通常時） */
    nav .btn,
    nav .btn[aria-current="page"] {
      background: var(--brand);
      color: #fff;
      border-color: var(--brand);
      box-shadow: none;
      transform: none;
      outline: none;
    }

    /* メッセージボタン通常時（白背景、ブランド色テキスト） */
    #aboutLink,
    #aboutLink[aria-current="page"] {
      background: var(--bg);
      color: var(--brand);
      border-color: var(--line);
      box-shadow: none;
      transform: none;
      outline: none;
    }

    /* 参加登録ボタンのホバー効果（グレー→白） */
    nav .btn:hover,
    nav .btn:focus-visible {
      background: #fff;
      color: var(--brand);
      border-color: var(--line);
      box-shadow: none;
      transform: none;
      outline: none;
    }

    /* メッセージボタンのホバー効果（白→グレー） */
    #aboutLink:hover {
      background: var(--brand);
      color: #fff;
      border-color: var(--brand);
      box-shadow: none;
      transform: none;
      outline: none;
    }

    /* ハンバーガーメニュー用のスタイル */
    .menu-toggle {
      display: none;
      background: transparent;
      border: none;
      padding: 10px;
      cursor: pointer;
      z-index: 60;
      /* 右端に固定するために追加 */
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    .menu-toggle span {
      display: block;
      width: 24px;
      height: 2px;
      margin: 5px 0;
      background: var(--ink);
      transition: all 0.3s ease;
    }
    
    /* モバイル向けナビゲーション */
    @media (max-width: 767px) {
      .menu-toggle {
        display: block;
      }
      
      nav ul {
        position: fixed;
        top: 0;
        right: -100%;
        width: 80%;
        max-width: 300px;
        height: 100vh;
        background: var(--bg);
        flex-direction: column;
        padding: 60px 20px 20px;
        z-index: 55;
        border-left: 1px solid var(--line);
        transition: right 0.3s ease;
        box-shadow: var(--shadow);
      }
      
      nav ul.active {
        right: 0;
      }
      
      nav li {
        width: 100%;
      }
      
      nav a {
        display: block;
        width: 100%;
        padding: 12px 16px;
        margin: 4px 0;
      }
      
      /* ハンバーガーメニューが開いている時のアイコン */
      .menu-toggle.active span:nth-child(1) {
        transform: translateY(7px) rotate(45deg);
      }
      
      .menu-toggle.active span:nth-child(2) {
        opacity: 0;
      }
      
      .menu-toggle.active span:nth-child(3) {
        transform: translateY(-7px) rotate(-45deg);
      }
      
      /* オーバーレイ */
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 50;
      }
      
      .overlay.active {
        display: block;
      }
    }

    /* ヘッダーのブランド部分のリンクスタイル */
    .brand a {
      text-decoration: none;
      color: inherit;
      display: grid;
      gap: 2px;
      transition: opacity 0.2s ease;
    }

    .brand a:hover {
      opacity: 0.8;
    }

    /* Footer */
    footer { border-top: 1px solid rgba(31,41,55,.08); padding: 40px 0; color: var(--ink-2); }
    .footer-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }

    /* タブレット以上のサイズでは2列表示 */
    @media (min-width: 768px) {
      .footer-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    /* デスクトップサイズでは4列表示 */
    @media (min-width: 1024px) {
      .footer-grid {
        grid-template-columns: 2fr 1fr 1fr 1fr;
      }
    }

    /* フッターリンクのスタイル調整 */
    footer a {
      color: var(--ink-2);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    footer a:hover {
      color: var(--brand);
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <a class="skip" href="#home">メインへ移動</a>

  <!-- Header / Nav with hamburger menu for mobile -->
  <header>
    <div class="container nav">
      <div class="brand">
        <a href="#home" data-scroll style="text-decoration: none; color: inherit;">
          <b>Rekimoto Lab. × Ishiguro Lab.</b>
          <small>Open House 2025</small>
        </a>
      </div>
      <button class="menu-toggle" aria-label="メニュー">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav aria-label="メイン">
        <ul>
          <li><a href="#overview" data-scroll>概要</a></li>
          <li><a href="#schedule" data-scroll>スケジュール</a></li>
          <li><a href="#venue" data-scroll>会場</a></li>
          <li><a href="#demos" data-scroll>展示内容</a></li>
          <li><a href="#members" data-scroll>メンバー</a></li>
          <li><a href="#" id="aboutLink">メッセージ</a></li>
          <li><a class="btn" href="#register" data-scroll>参加登録</a></li>
        </ul>
      </nav>
    </div>
    <div class="overlay"></div>
  </header>

  <!-- MAIN (single page) -->
  <main id="main">
    <!-- 概要 / Hero -->
    <section id="home" class="hero">
      <div class="container hero-inner">
        <div class="stack">
          <h1 class="title">Rekimoto Lab. Ishiguro Lab.<br/>Open House 2025</h1>
          <p class="lead">2025年11月15日(土)・16日(日)／東京大学本郷キャンパス<br/>Human Augmentation と Internet of Abilities (IoA) 、自律移動体技術に基づく<br/>最新の研究デモを公開します。</p>
          <div class="cluster">
            <a class="btn" href="#register" data-scroll>参加登録（Peatix）</a>
            <a class="btn ghost" href="#demos" data-scroll>展示内容を見る</a>
          </div>
        </div>
      </div>
    </section>

    <!-- 開催概要（独立セクション） -->
    <section id="overview">
      <div class="container">
        <h2>開催概要</h2>
        <div class="card">
          <p>暦本研究室・石黒研究室（東京大学大学院情報学環）合同のオープンハウスを開催いたします。<br>暦本研究室では、人間や人工物がそれぞれの能力を時間・空間の制約を超えて活用する、Human AugmentationやInternet of Abilities(IoA)という概念を提唱し、様々な研究を展開しています。<br>石黒研究室では、上記コンセプトに加え、自動運転技術と人との関係、自律移動体技術を活用したさまざまなアプリケーションの可能性も探索し，具現化する研究を行っています。<br>オープンハウスでは、これらの考えに基づいた研究成果を中心に、各種研究を展示いたします。<br>なお、暦本研究室は、暦本純一教授の退官に伴い、本年度をもって解散いたします。暦本研究室のオープンハウスは今年が最後となりますので、ぜひお立ち寄りいただけますと幸いです。<br><br>We are pleased to announce that the Rekimoto Laboratory and the Ishiguro Laboratory of the Interfaculty Initiative in Information Studies, The University of Tokyo, will jointly host an Open House.<br>The Rekimoto Laboratory has advanced research under the concepts of Human Augmentation and the Internet of Abilities (IoA), which seek to enable both humans and artifacts to transcend the limitations of time and space in order to fully realize their potential.<br>The Ishiguro Laboratory, in addition to engaging with these concepts, conducts research that explores and materializes the possibilities of autonomous driving technologies, human–technology interaction, and applications utilizing autonomous mobile systems.<br>At the Open House, a wide range of research achievements will be presented, with particular emphasis on projects grounded in these approaches.<br>Please be advised that the Rekimoto Laboratory will be dissolved at the end of this academic year following the retirement of Professor Jun Rekimoto. Accordingly, this year’s event will mark the final Open House of the Rekimoto Laboratory. We would be most honored by your attendance.</p>
          <div class="cluster" style="margin-top:8px; gap:8px; flex-wrap:wrap">
            <span class="tag">Human Augmentation</span>
            <span class="tag">Internet of Abilities</span>
            <span class="tag">Demonstrations</span>
          </div>
        </div>
      </div>
    </section>

    <!-- スケジュール -->
    <section id="schedule">
      <div class="container">
        <h2>スケジュール</h2>
        <div class="card two-col">
          <div>
            <h3>2025年11月15日(土)</h3>
            <ul class="list">
              <li>13:00 開場</li>
              <li>13:00–17:00 デモ & ポスター</li>
              <li>17:00–18:00 講演</li>
            </ul>
          </div>
          <div>
            <h3>2025年11月16日(日)</h3>
            <ul class="list">
              <li>11:00–17:00 デモ & ポスター</li>
              <li>17:00–18:00 講演</li>
              <li>18:30– 懇親会（Sky Presentation Room／2号館9階92B）</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 会場 / アクセス -->
    <section id="venue">
      <div class="container">
        <h2>会場</h2>
        <div class="two-col" style="align-items:start; gap: var(--gap);">
          <div class="stack">
            <div class="card">
              <h3>会場</h3>
              <ul class="list">
                <li>福武ラーニングスタジオ</li>
                <li>福武ラーニングシアター</li>
              </ul>
            </div>
            <div class="card">
              <h3>アクセス</h3>
              <ul class="list">
                <li>都営大江戸線　本郷三丁目駅　徒歩7分</li>
                <li>東京メトロ丸ノ内線　本郷三丁目駅　徒歩8分</li>
                <li>東京メトロ南北線　東大前駅　徒歩10分</li>
              </ul>
            </div>
          </div>
          <div class="card" aria-label="Google Map: 〒113-0033">
            <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius: var(--radius);">
              <iframe title="Google Map 〒113-0033" src="https://www.google.com/maps?q=〒113-0033&output=embed" style="position:absolute; top:0; left:0; width:100%; height:100%; border:0;" loading="lazy" referrerpolicy="no-referrer-when-downgrade" allowfullscreen></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 展示内容（カード → 記事=モーダル） -->
    <section id="demos">
      <div class="container">
        <h2>展示内容</h2>
        <div class="grid auto-fit">
          <!-- Demo card template: data-title + data-detail target -->
          <article class="card stack demo" data-title="Voice Messaging" data-detail="#detail-voice">
            <div class="cluster" style="justify-content:space-between">
              <h3 style="margin:0">Voice Messaging</h3>
              <span class="tag">Demo</span>
            </div>
            <p>音声コミュニケーションを拡張するメッセージング体験のプロトタイプ。</p>
            <button class="btn ghost" type="button">詳細を見る</button>
          </article>

          <article class="card stack demo" data-title="UniTree Robot" data-detail="#detail-unitree">
            <div class="cluster" style="justify-content:space-between">
              <h3 style="margin:0">UniTree Robot</h3>
              <span class="tag">Robot</span>
            </div>
            <p>機動性の高いロボットプラットフォームを用いた遠隔協働デモ。</p>
            <button class="btn ghost" type="button">詳細を見る</button>
          </article>

          <article class="card stack demo" data-title="NoseDirection" data-detail="#detail-nose">
            <div class="cluster" style="justify-content:space-between">
              <h3 style="margin:0">NoseDirection</h3>
              <span class="tag">AR</span>
            </div>
            <p>視線や鼻先方向推定に基づく直感的インタラクション。</p>
            <button class="btn ghost" type="button">詳細を見る</button>
          </article>
        </div>
      </div>
    </section>

    <!-- メンバー -->
    <section id="members">
      <div class="container">
        <h2>メンバー</h2>
        <div class="grid auto-fit">
          <div class="card stack">
            <h3>藤村 彩紀</h3>
            <p class="muted">Voice Messaging ／ 説明</p>
          </div>
          <div class="card stack">
            <h3>田堂 皓也</h3>
            <p class="muted">UniTree Robot ／ 説明</p>
          </div>
          <div class="card stack">
            <h3>仲村 友杜</h3>
            <p class="muted">NoseDirection ／ 説明</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 参加登録（同一ページ内） -->
    <section id="register">
      <div class="container">
        <div class="stack">
          <h2>参加登録</h2>
          <p>チケット管理は Peatix を予定しています。以下のボタンから外部サイトへ移動してお申し込みください。</p>
          <a class="btn" href="#" aria-disabled="true">Peatix へ（準備中）</a>
        </div>
      </div>
    </section>
  </main>

  <!-- About (別ビュー) -->
  <section id="aboutView" hidden>
    <div class="container">
      <div class="cluster" style="justify-content:space-between; margin-top:24px;">
        <a class="btn ghost" href="#home" id="backHome">← ホームへ戻る</a>
      </div>
      <h2 style="margin-top:16px;">メッセージ</h2>
      <article class="prose card stack">
        <h3>説明または指示のためのサブ見出し</h3>
        <p>本イベントの背景、研究の狙い、そして来場者へのメッセージを記載するセクションです。英文との併記や、写真・図版の挿入にも対応できるようにしています。</p>
        <p>Excepteur efficient emerging, minim veniam anim aute carefully curated Ginza conversation exquisite perfect nostrud nisi intricate content. Punctual adipisicing, essential lovely queen tempor eiusmod irure. Exclusive izakaya charming Scandinavian impeccable aute quality of life soft power pariatur.</p>
      </article>
    </div>
  </section>

  <footer>
    <div class="container">
      <!-- フッターを4カラムのグリッドに変更 -->
      <div class="footer-grid">
        <!-- 1. タイトルとお問い合わせ -->
        <div class="stack">
          <b>Rekimoto Lab. × Ishiguro Lab. Open House 2025</b>
          <small>お問い合わせ： rkmtlab+openhouse2025atgmail.com（<span class="kbd">at</span> → <span class="kbd">@</span>）</small>
        </div>
        
        <!-- 2. SNS共有 -->
        <div class="stack">
          <b>SNS</b>
          <div class="cluster">
            <a href="#" aria-label="X"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3 3l8.5 10L3 21h3l7-7.9L18.8 21H21l-8.3-9.6L21 3h-3l-6.4 7.3L7.7 3H3z" fill="currentColor"/></svg></a>
            <a href="#" aria-label="Instagram"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="4.5" stroke="currentColor" stroke-width="2"/><circle cx="17.5" cy="6.5" r="1.2" fill="currentColor"/></svg></a>
          </div>
        </div>
        
        <!-- 3. アーカイブ -->
        <div class="stack">
          <b>アーカイブ</b>
          <div class="stack" style="gap: 8px;">
            <a href="#" aria-disabled="true">Open House 2022</a>
            <a href="#" aria-disabled="true">Open House 2019</a>
            <a href="#" aria-disabled="true">Open House 2016</a>
          </div>
        </div>
        
        <!-- 4. 研究室リンク -->
        <div class="stack">
          <b>研究室</b>
          <div class="stack" style="gap: 8px;">
            <a href="#" aria-disabled="true">暦本研究室 TOP</a>
            <a href="#" aria-disabled="true">石黒研究室 TOP</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- 展示詳細（記事）テンプレート：各カードから参照される -->
  <template id="detail-voice">
    <div class="dialog-body prose">
      <p><b>Voice Messaging</b> は、音声の収集・変換・共有を高速に往復できるメッセージング体験を提案します。会場では録音→可視化→再生までの一連の流れを体験できます。</p>
      <ul>
        <li>研究背景：非言語情報を含む音声の活用</li>
        <li>技術要素：音声特徴抽出、リアルタイム処理</li>
        <li>体験時間：1〜2分</li>
      </ul>
    </div>
  </template>
  <template id="detail-unitree">
    <div class="dialog-body prose">
      <p><b>UniTree Robot</b> は、機動性の高いロボットを用いた遠隔協働デモです。実機の基本動作、遠隔からの操作、センサデータの可視化を体験できます。</p>
      <ul>
        <li>研究背景：Human Augmentation における身体拡張</li>
        <li>技術要素：遠隔制御、安定歩行、自己位置推定</li>
        <li>体験時間：2〜3分</li>
      </ul>
    </div>
  </template>
  <template id="detail-nose">
    <div class="dialog-body prose">
      <p><b>NoseDirection</b> は、鼻先方向推定を用いた直感的な視点共有／ポインティング手法のデモです。スクリーン上のカーソルが顔の向きと同期します。</p>
      <ul>
        <li>研究背景：視線・頭部姿勢を用いたヒューマンインタフェース</li>
        <li>技術要素：顔特徴点検出、方向ベクトルの推定</li>
        <li>体験時間：1〜2分</li>
      </ul>
    </div>
  </template>

  <!-- Dialog element (1つを使い回し) -->
  <dialog id="demoDialog" aria-labelledby="dialogTitle">
    <div class="dialog-head">
      <strong id="dialogTitle">Detail</strong>
      <button class="close" aria-label="閉じる" id="dialogClose">✕</button>
    </div>
    <div id="dialogContent"></div>
  </dialog>

  <script>
    // ハンバーガーメニュー制御
    const menuToggle = document.querySelector('.menu-toggle');
    const navMenu = document.querySelector('nav ul');
    const overlay = document.querySelector('.overlay');

    function toggleMenu() {
      menuToggle.classList.toggle('active');
      navMenu.classList.toggle('active');
      overlay.classList.toggle('active');
      document.body.classList.toggle('menu-open');
    }

    menuToggle.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);

    // メニュー内のリンククリック時にメニューを閉じる
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', () => {
        if (navMenu.classList.contains('active')) {
          toggleMenu();
        }
      });
    });
    
    // In-page nav current state
    const sections = ["home","overview", "schedule","venue","demos","members","register"]; // used for aria-current
    const setCurrent = () => {
      if (typeof main !== 'undefined' && main && main.hidden) return;
      const y = window.scrollY + 120; // offset for sticky header
      if (window.scrollY < 10) {
        document.querySelectorAll('nav a[data-scroll]').forEach(a => {a.setAttribute('aria-current', 'false');});
        return;
      }
      let current = sections[0];
      for (const id of sections) {
        const el = document.getElementById(id);
        if (el && el.offsetTop <= y) current = id;
      }
      document.querySelectorAll('nav a[data-scroll]').forEach(a => {
        const href = a.getAttribute('href').replace('#','');
        a.setAttribute('aria-current', href === current ? 'page' : 'false');
      });
    };
    window.addEventListener('scroll', setCurrent, { passive: true });
    window.addEventListener('DOMContentLoaded', setCurrent);

    // Smooth scroll (extra safety for older browsers)
    document.querySelectorAll('a[data-scroll]').forEach(a => {
      a.addEventListener('click', (e) => {
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if (el) { e.preventDefault(); el.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
      });
    });

    // About: toggle separate view
    const aboutLink = document.getElementById('aboutLink');
    const aboutView = document.getElementById('aboutView');
    const main = document.getElementById('main');
    const backHome = document.getElementById('backHome');
    const headerEl = document.querySelector('header');
    function setAboutNavCurrent(isAbout){
      const about = document.getElementById('aboutLink');
      if (!about) return;
      about.setAttribute('aria-current', isAbout ? 'page' : 'false');
    }
    function showAbout(){
      main.hidden = true;
      aboutView.hidden = false;
      if (headerEl) headerEl.hidden = true;
      setAboutNavCurrent(true);
      window.scrollTo({ top: 0 });
    }
    function showHome(){
      aboutView.hidden = true;
      main.hidden = false;
      if (headerEl) headerEl.hidden = false;
      setAboutNavCurrent(false);
      document.getElementById('home').scrollIntoView({ behavior:'smooth' });
    }
    aboutLink.addEventListener('click', (e)=>{ e.preventDefault(); showAbout(); });
    backHome.addEventListener('click', (e)=>{ e.preventDefault(); showHome(); });

    // 展示カード → 詳細モーダル
    const dialog = document.getElementById('demoDialog');
    const dialogTitle = document.getElementById('dialogTitle');
    const dialogContent = document.getElementById('dialogContent');
    const dialogClose = document.getElementById('dialogClose');

    function openDetail(title, templateSelector){
      const tpl = document.querySelector(templateSelector);
      if (!tpl) return;
      dialogTitle.textContent = title;
      dialogContent.innerHTML = ""; // reset
      dialogContent.appendChild(tpl.content.cloneNode(true));
      if (typeof dialog.showModal === 'function') {
        dialog.showModal();
      } else {
        // fallback
        dialog.setAttribute('open','');
      }
    }

    document.querySelectorAll('.demo').forEach(card => {
      const btn = card.querySelector('button');
      btn.addEventListener('click', () => openDetail(card.dataset.title, card.dataset.detail));
      // also open when clicking the card surface (excluding interactive elements)
      card.addEventListener('click', (e)=>{
        if (e.target.tagName.toLowerCase() === 'button' || e.target.closest('button')) return;
        openDetail(card.dataset.title, card.dataset.detail);
      });
    });

    dialogClose.addEventListener('click', ()=> dialog.close());
    dialog.addEventListener('click', (e)=>{
      const rect = dialog.getBoundingClientRect();
      const inDialog = rect.top <= e.clientY && e.clientY <= rect.bottom && rect.left <= e.clientX && e.clientX <= rect.right;
      if (!inDialog) dialog.close();
    });

  </script>
</body>
</html>
